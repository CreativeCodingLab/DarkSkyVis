/**
 * Created by krbalmryde on 5/31/15.
 */

function initScene() {
    // Create our scene
    scene = new THREE.Scene();

    // Adding our Group object
    group = new THREE.Group();
    scene.add( group );
}


function initCamera() {
    // Get our Camera working
    //camera.lookAt(0,0,0);
    camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 200 );
    camera.position.set(58,32.5,53.5);
    camera.rotateX(0.050);
    camera.rotateY(-0.25);
    camera.rotateZ(1.55);
}


function initRenderer() {
    // Set up the Renderer
    renderer = new THREE.WebGLRenderer( { antialias: true } );
    renderer.setPixelRatio( window.devicePixelRatio );
    renderer.setSize( window.innerWidth, window.innerHeight );
    renderer.gammaInput = true;
    renderer.gammaOutput = true;
}

function initStats() {
    // Setup Stats object
    stats = new Stats();
    stats.domElement.style.position = 'absolute';
    stats.domElement.style.top = '0px';
}

function initControls() {
    controls = new THREE.OrbitControls( camera, renderer.domElement );
    controls.damping = 0.2;
    controls.addEventListener('change', onFrame);
}


function initContainer() {
    // Setup Container stuff
    container = document.getElementById( 'Sandbox' );
    container.appendChild( renderer.domElement );
    container.appendChild( stats.domElement );

    // Add listeners
    document.addEventListener( 'keypress', handleKeys, false );
    window.addEventListener( 'resize', onReshape, false );
}


function initSlider() {
    slider = $('.tslider')
    slider.noUiSlider({
        start: [0, 50],
        connect: true,  // shows areas of coverage
        orientation: "vertical",
        direction: "ltr",  //
        behaviour: 'drag-tap',  // allows user to drag center around
        step: 1,  // steps between values
        format: wNumb({   // determines number format
            decimals: 0
        }),
        range: {   // min and max of range
            'min':[ 0 ],
            '25%': [ 25 ],
            '50%': [ 50 ],
            '75%': [ 75 ],
            'max': [ 88 ]
        }
    })

    slider.noUiSlider_pips({
        mode: 'count',
        values: 5,
        density: 3
    })
}

function randPoint3D() {
    return [
        Math.floor(( Math.random() * window.innerWidth/2) ),
        Math.floor(( Math.random() * window.innerHeight/2) ),
        Math.floor(( Math.random() * 1000/2) )
    ]
}

function randVec3D() {
    return new THREE.Vector3(
        Math.floor(( Math.random() * window.innerWidth/2) ),
        Math.floor(( Math.random() * window.innerHeight/2) ),
        Math.floor(( Math.random() * 1000/2) )
    )

}


function generatePoints(n) {
    var points = [];
    for (var i=0; i < n; i++) {
        points[i] = randPoint3D()
    }
    return points
}

function generateVecs(n) {
    var points = [];
    for (var i=0; i < n; i++) {
        points[i] = randVec3D()
    }
    return points
}


function getHaloPos() {
    return [
        [57.75873, 30.51175, 50.67266],
        [57.79088, 30.5159, 50.69601],
        [57.83078, 30.52357, 50.71575],
        [57.82203, 30.54809, 50.76583],
        [57.87087, 30.58582, 50.83687],
        [57.93389, 30.59735, 50.90918],
        [57.98787, 30.63187, 50.95484],
        [57.96375, 30.67236, 50.98038],
        [57.95668, 30.67881, 51.00823],
        [58.02142, 30.75831, 50.96286],
        [58.07133, 30.85571, 50.9359],
        [57.96853, 30.97486, 51.07055],
        [57.90994, 31.1146, 51.21024],
        [57.89844, 31.17443, 51.2174],
        [57.97069, 31.21174, 51.11368],
        [58.00572, 31.28487, 51.03929],
        [57.95961, 31.38728, 51.07526],
        [57.97475, 31.47992, 51.09749],
        [58.01149, 31.51934, 51.02764],
        [58.02086, 31.6022, 51.04963],
        [57.96339, 31.76309, 51.09052],
        [57.96178, 31.83946, 51.11997],
        [57.94487, 31.91908, 51.14442],
        [57.91059, 32.02015, 51.15498],
        [57.89152, 32.16246, 51.24106],
        [57.86091, 32.2483, 51.19536],
        [57.85397, 32.36631, 51.22644],
        [57.78991, 32.49715, 51.24912],
        [57.80479, 32.60713, 51.27965],
        [57.7815, 32.71111, 51.27673],
        [57.79481, 32.80915, 51.33656],
        [57.81707, 32.9567, 51.32062],
        [57.83929, 33.05416, 51.31346],
        [57.84676, 33.18587, 51.26931],
        [57.87991, 33.25417, 51.20763],
        [57.87494, 33.39693, 51.14116],
        [57.90676, 33.54618, 51.09335],
        [57.93448, 33.68033, 51.02179],
        [57.92148, 33.82469, 50.99213],
        [57.87834, 34.00926, 51.00136],
        [57.88257, 34.20378, 50.97726],
        [57.87118, 34.38932, 50.96254],
        [57.87407, 34.45444, 50.95184],
        [57.89493, 34.47562, 50.93322],
        [57.92727, 34.46155, 50.89215],
        [57.97128, 34.45876, 50.85232],
        [58.03923, 34.43966, 50.82545],
        [58.11383, 34.45456, 50.78511],
        [58.14222, 34.46873, 50.798],
        [58.14862, 34.50955, 50.79968],
        [58.15957, 34.58863, 50.80075],
        [58.193, 34.65878, 50.77924],
        [58.20342, 34.72156, 50.75805],
        [58.23159, 34.73777, 50.75689],
        [58.25476, 34.71479, 50.74926],
        [58.28796, 34.69894, 50.74698],
        [58.3191, 34.69461, 50.74161],
        [58.35324, 34.70192, 50.72529],
        [58.36459, 34.72863, 50.71767],
        [58.38504, 34.72575, 50.71696],
        [58.4113, 34.71393, 50.7233],
        [58.45222, 34.69444, 50.7271],
        [58.46251, 34.67957, 50.74764],
        [58.484, 34.66694, 50.75812],
        [58.49901, 34.67278, 50.76255],
        [58.52275, 34.67596, 50.76274],
        [58.5481, 34.68735, 50.76994],
        [58.57067, 34.67679, 50.77434],
        [58.60401, 34.67899, 50.77319],
        [58.62706, 34.66115, 50.7733],
        [58.64311, 34.65017, 50.77291],
        [58.67706, 34.6545, 50.76352],
        [58.69662, 34.65685, 50.75561],
        [58.72255, 34.67529, 50.74588],
        [58.73161, 34.6875, 50.7517],
        [58.74434, 34.69504, 50.75372],
        [58.75072, 34.68461, 50.76976],
        [58.76452, 34.69777, 50.76882],
        [58.77621, 34.72059, 50.7731],
        [58.79119, 34.71944, 50.76517],
        [58.80458, 34.73164, 50.76913],
        [58.8218, 34.74985, 50.76718],
        [58.84008, 34.7614, 50.76452],
        [58.85658, 34.77699, 50.75642],
        [58.8681, 34.79439, 50.75819],
        [58.88419, 34.80035, 50.76186],
        [58.89342, 34.81076, 50.76558],
        [58.90549, 34.81987, 50.76499],
        [58.91978, 34.82618, 50.76717]
    ]
}


function getPoints() {
    return [[39.58268, 43.89976, 24.72711],
        [40.1916, 43.70065, 24.50798],
        [40.22467, 43.67676, 24.44666],
        [40.21954, 43.61176, 24.35578],
        [40.27877, 43.57314, 24.24905],
        [40.35799, 43.55532, 24.19018],
        [40.57103, 43.48354, 24.12124],
        [40.74953, 43.43552, 24.14527],
        [40.77007, 43.46067, 24.17573],
        [40.71593, 43.52404, 24.26473],
        [40.74014, 43.53297, 24.28135],
        [40.70744, 43.60518, 24.34462],
        [40.69841, 43.63185, 24.32475],
        [40.72169, 43.6132, 24.34667],
        [40.79662, 43.60306, 24.31491],
        [40.81709, 43.66763, 24.34406],
        [40.82225, 43.70137, 24.35359],
        [40.77262, 43.7362, 24.38319],
        [40.81282, 43.75491, 24.42455],
        [40.87148, 43.76183, 24.4756],
        [40.85909, 43.79853, 24.48663],
        [40.86676, 43.82746, 24.5216],
        [40.83466, 43.84835, 24.55032],
        [40.82585, 43.88571, 24.58267],
        [40.83445, 43.92107, 24.63591],
        [40.87265, 43.96569, 24.64361],
        [40.88791, 44.01056, 24.6567],
        [40.87114, 44.10967, 24.71017],
        [40.87164, 44.16196, 24.75707],
        [40.9029, 44.18213, 24.79089],
        [40.95715, 44.19899, 24.81105],
        [40.97885, 44.23688, 24.84903],
        [41.02003, 44.27618, 24.85399],
        [41.03743, 44.31577, 24.85607],
        [41.08031, 44.38086, 24.85367],
        [41.11153, 44.43275, 24.85403],
        [41.14175, 44.4757, 24.8713],
        [41.16561, 44.52658, 24.88566],
        [41.18476, 44.59641, 24.90133],
        [41.18814, 44.66425, 24.91966],
        [41.19071, 44.73782, 24.9315],
        [41.19858, 44.82303, 24.93152],
        [41.19657, 44.89613, 24.94458],
        [41.1993, 45.00177, 24.94545],
        [41.18784, 45.10707, 24.94456],
        [41.14361, 45.1958, 24.95133],
        [41.10828, 45.28488, 24.94542],
        [41.03807, 45.38004, 24.94758],
        [40.89485, 45.46853, 24.94861],
        [40.76056, 45.46463, 24.97409],
        [40.70628, 45.46204, 24.99029],
        [40.70931, 45.45911, 24.99514],
        [40.75407, 45.4291, 25.00986],
        [40.81425, 45.36986, 25.03298],
        [40.90822, 45.30074, 25.05186],
        [41.02594, 45.22683, 25.0602],
        [41.16117, 45.15016, 25.08367],
        [41.06048, 45.22421, 25.08993],
        [41.10981, 45.1986, 25.10039],
        [41.22879, 45.1301, 25.11983],
        [41.24547, 45.13228, 25.14013],
        [41.17876, 45.1551, 25.15682],
        [41.09201, 45.17886, 25.20226],
        [41.09063, 45.17009, 25.20486],
        [41.14524, 45.12689, 25.21265],
        [41.12668, 45.10823, 25.21683],
        [41.10267, 45.1057, 25.22095],
        [41.08634, 45.08555, 25.22603],
        [41.11375, 45.06861, 25.22135],
        [41.13052, 45.0403, 25.2159],
        [41.12842, 45.0238, 25.21188],
        [41.13463, 45.00334, 25.20846],
        [41.15077, 44.98335, 25.20416],
        [41.17742, 44.9617, 25.20389],
        [41.20093, 44.9417, 25.20662],
        [41.21223, 44.92018, 25.20663],
        [41.23657, 44.89763, 25.20855],
        [41.27103, 44.87295, 25.21128],
        [41.30829, 44.85262, 25.21658],
        [41.33316, 44.84077, 25.22073],
        [41.34204, 44.82193, 25.22491],
        [41.35187, 44.80796, 25.23218],
        [41.36487, 44.79708, 25.2429],
        [41.37257, 44.78114, 25.25063],
        [41.38638, 44.76826, 25.25526],
        [41.39943, 44.755, 25.26396],
        [41.41984, 44.73745, 25.26852],
        [41.42377, 44.72502, 25.27643],
        [41.44051, 44.71505, 25.2828]];
}